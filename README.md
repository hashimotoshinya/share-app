# ğŸ“˜Share App - Firebase èªè¨¼å¯¾å¿œ SNS ã‚µãƒ³ãƒ—ãƒ«

![ãƒˆãƒƒãƒ—ç”»é¢](docs/images/top.png)

Firebase èªè¨¼ã‚’ç”¨ã„ãŸã‚·ãƒ³ãƒ—ãƒ«ãª SNS é¢¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚  
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æŠ•ç¨¿ã®ä½œæˆã€å‰Šé™¤ã€ã„ã„ã­ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ Nuxtï¼ˆVueï¼‰ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ Laravel API ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€  
Firebase Authentication ã¨é€£æºã—ãŸèªè¨¼å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ¯ä½œæˆã—ãŸç›®çš„

- Firebase Authentication ã¨ Laravel ã‚’é€£æºã—ãŸå®Ÿè·µçš„ãªèªè¨¼å‡¦ç†ã‚’ç†è§£ã™ã‚‹ãŸã‚
- REST API ã‚’å‰æã¨ã—ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆãƒ»Feature ãƒ†ã‚¹ãƒˆã®å®Ÿè£…çµŒé¨“ã‚’ç©ã‚€ãŸã‚
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆVue/Nuxtï¼‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆLaravelï¼‰ã‚’åˆ†é›¢ã—ãŸæ§‹æˆã‚’å­¦ã¶ãŸã‚

å®Ÿå‹™ã‚’æƒ³å®šã—ã€  
**ER å›³è¨­è¨ˆ â†’ API å®Ÿè£… â†’ Feature ãƒ†ã‚¹ãƒˆ â†’ Git ç®¡ç†**  
ã¨ã„ã†ä¸€é€£ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’æ„è­˜ã—ã¦ä½œæˆã—ã¦ã„ã¾ã™ã€‚

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³URL

â€» ç¾åœ¨ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®å®Ÿè¡Œã‚’æƒ³å®šã—ã¦ã„ã¾ã™  
ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ã¯æœªå®Ÿæ–½ï¼‰

---

## ä»–ã®ãƒªãƒã‚¸ãƒˆãƒª

â€» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åŒä¸€ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™  
ï¼ˆ`frontend / backend` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼‰

---

## ğŸš€æ©Ÿèƒ½ä¸€è¦§

- Firebase Authentication ã‚’åˆ©ç”¨ã—ãŸãƒ­ã‚°ã‚¤ãƒ³ / æ–°è¦ç™»éŒ²
- æŠ•ç¨¿ã®ä¸€è¦§è¡¨ç¤º
- æŠ•ç¨¿ã®ä½œæˆãƒ»å‰Šé™¤
- æŠ•ç¨¿ã¸ã®ã„ã„ã­ï¼ˆãƒˆã‚°ãƒ«ï¼‰
- æŠ•ç¨¿ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ»ä¸€è¦§è¡¨ç¤º
- ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®èªè¨¼ãƒã‚§ãƒƒã‚¯
- Feature Test / Unit Test å®Ÿè£…
- Laravel API ã«ã‚ˆã‚‹ REST API è¨­è¨ˆ

---

## ğŸ› ä½¿ç”¨æŠ€è¡“ï¼ˆå®Ÿè¡Œç’°å¢ƒï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- PHP 8.x
- Laravel 10.x
- Firebase Admin SDK
- SQLiteï¼ˆãƒ†ã‚¹ãƒˆç’°å¢ƒï¼‰
- PHPUnitï¼ˆFeature / Unit Testï¼‰

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- Nuxt 3
- Vue 3ï¼ˆComposition APIï¼‰
- Firebase Authenticationï¼ˆClient SDKï¼‰
- Tailwind CSS

### ãã®ä»–
- Dockerï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
- Git / GitHub

---

## ğŸ—„ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

### users ãƒ†ãƒ¼ãƒ–ãƒ«
- id
- name
- email
- firebase_uid
- timestamps

### posts ãƒ†ãƒ¼ãƒ–ãƒ«
- id
- user_idï¼ˆFKï¼‰
- content
- timestamps

### comments ãƒ†ãƒ¼ãƒ–ãƒ«
- id
- user_idï¼ˆFKï¼‰
- post_idï¼ˆFKï¼‰
- content
- timestamps

### likes ãƒ†ãƒ¼ãƒ–ãƒ«
- id
- user_idï¼ˆFKï¼‰
- post_idï¼ˆFKï¼‰
- timestamps

---

## ğŸ“ERå›³


![ERå›³](docs/images/er.png)

---

## ç’°å¢ƒæ§‹ç¯‰

### å‰ææ¡ä»¶
ä»¥ä¸‹ãŒãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ã€‚
- Git
- Docker / Docker Compose
- Node.jsï¼ˆ18.x ä»¥ä¸Šï¼‰
- npm
- Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆAuthentication æœ‰åŠ¹åŒ–æ¸ˆã¿ï¼‰

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```
git clone https://github.com/hashimotoshinya/share-app.git
cd share-app
```

### 2. Firebase ã®è¨­å®š

#### 2-1. Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1.	Firebase Console ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2.	Authentication ã‚’æœ‰åŠ¹åŒ–
3.	ã‚µã‚¤ãƒ³ã‚¤ãƒ³æ–¹æ³•ã§ ãƒ¡ãƒ¼ãƒ« / ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ ã‚’æœ‰åŠ¹åŒ–

#### 2-2. Firebase Service Accountï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç”¨ï¼‰

1.	Firebase Console
â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â†’ ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
â†’ æ–°ã—ã„ç§˜å¯†éµã‚’ç”Ÿæˆ
2.	å–å¾—ã—ãŸ JSON ã‚’ä»¥ä¸‹ã«é…ç½®ï¼ˆâ€» Git ç®¡ç†å¤–ï¼‰
```
backend/storage/firebase/firebase-adminsdk.json
```
3.	.env ã«ãƒ‘ã‚¹ã‚’è¨­å®š
```
FIREBASE_CREDENTIALS=storage/firebase/firebase-adminsdk.json
```
â€» firebase-adminsdk.json ã¯ .gitignore å¯¾è±¡ ã§ã™

#### 2-3. Firebase Web è¨­å®šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ï¼‰

Firebase Console
â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â†’ å…¨èˆ¬
â†’ Web ã‚¢ãƒ—ãƒªã‚’è¿½åŠ 
å–å¾—ã—ãŸè¨­å®šå€¤ã‚’ frontend/.env ã«è¨˜è¼‰ã—ã¾ã™ã€‚
```
NUXT_PUBLIC_FIREBASE_API_KEY=xxxx
NUXT_PUBLIC_FIREBASE_AUTH_DOMAIN=xxxx
NUXT_PUBLIC_FIREBASE_PROJECT_ID=xxxx
NUXT_PUBLIC_FIREBASE_STORAGE_BUCKET=xxxx
NUXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=xxxx
NUXT_PUBLIC_FIREBASE_APP_ID=xxxx
```

### 3. Docker ç’°å¢ƒè¨­å®š

#### docker-compose.yml ã® Firebase è¨­å®š
Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦ä»¥ä¸‹ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```
environment:
  - TZ=Asia/Tokyo
  - FIREBASE_PROJECT=app
  - FIREBASE_PROJECT_ID=your-firebase-project-id
  - FIREBASE_CREDENTIALS=/var/www/html/firebase-adminsdk.json
  - FIREBASE_DATABASE_URL=https://your-project-id.firebaseio.com
```

Service Account Key ã¯ä»¥ä¸‹ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚

```
/var/www/html/firebase-adminsdk.json
```

â€» Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´ã—ãŸå ´åˆã¯ã€docker compose build ã‚’å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆLaravelï¼‰

#### 4-1. ç’°å¢ƒå¤‰æ•°è¨­å®š

```
cd backend
cp .env.example .env
```
.envè¨­å®šä¾‹

```
â€» Docker ä½¿ç”¨æ™‚ã¯ MySQL ã‚’æƒ³å®š
DB_CONNECTION=mysql
DB_HOST=mysql-db
DB_PORT=3306
DB_DATABASE=app_db
DB_USERNAME=root
DB_PASSWORD=root
```

SQLite ä½¿ç”¨æ™‚ï¼ˆDocker éä½¿ç”¨ï¼‰

```
DB_CONNECTION=sqlite
DB_DATABASE=/absolute/path/to/database.sqlite
```

```
touch database/database.sqlite
```

#### 4-2. Docker ãƒ“ãƒ«ãƒ‰ & èµ·å‹•ï¼ˆDocker ä½¿ç”¨æ™‚ï¼‰

```
docker compose build
docker compose up -d
```

#### 4-3. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« & åˆæœŸåŒ–

```
Docker ä½¿ç”¨æ™‚ï¼š

docker compose exec app composer install
docker compose exec app php artisan key:generate
docker compose exec app php artisan migrate
```

### 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNuxtï¼‰
```
cd frontend
cp .env.example .env
npm install
npm run dev
```

èµ·å‹•å¾Œã€ä»¥ä¸‹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
```
http://localhost:3000/register
```

---

## å‹•ä½œç¢ºèª
1. Firebase ã§æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒã§ãã‚‹ã“ã¨
ä¾‹
- name: ãƒ€ãƒŸãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼
- email: dummy@example.com
- password: dummy1234

2. ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«æŠ•ç¨¿ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
3. æŠ•ç¨¿ãƒ»ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨

---

## ãƒ†ã‚¹ãƒˆ
```
cd backend
php artisan test
```
#### ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦
- Firebase èªè¨¼ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°å‡¦ç†ã‚’ Feature Test ã§æ¤œè¨¼
- æŠ•ç¨¿ / ã‚³ãƒ¡ãƒ³ãƒˆ / ã„ã„ã­ã® CRUD å‡¦ç†ã‚’ Feature Test ã§æ¤œè¨¼
- ãƒ¢ãƒ‡ãƒ«é–“ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Unit Test ã§æ¤œè¨¼
- å°†æ¥çš„ãªä»•æ§˜å¤‰æ›´ã‚’æƒ³å®šã—ã€Feature Test ã‚’ä¸­å¿ƒã«å®Ÿè£…ã—ã¦ã„ã¾ã™
---

## æ³¨æ„äº‹é …
- Firebase ã® Service Account Key ã¯ .gitignore ã«ã‚ˆã‚Šç®¡ç†å¤–ã¨ã—ã¦ã„ã¾ã™
- ãƒ†ã‚¹ãƒˆã§ã¯ Firebase èªè¨¼å‡¦ç†ã‚’ã‚¹ã‚¿ãƒ–åŒ–ã—ã¦ãŠã‚Šã€å®Ÿéš›ã® Firebase é€šä¿¡ã¯è¡Œã„ã¾ã›ã‚“
- Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ docker-compose.yml ã® environment ã‚’å¤‰æ›´ã—ãŸå ´åˆã¯
  docker compose build ã‚’å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
